<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NRQ9HYQCJW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NRQ9HYQCJW');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uganda SDG Stories - Stories for Comic Artists</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    <style>
        :root {
            --primary-color: #00689D;
            --secondary-color: #19486A;
            --accent-color: #FF9E1B;
            --background-color: #f5f5f5;
            --text-color: #333;
            --nav-height: 60px;
            --transition-speed: 0.3s;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            overflow-x: hidden;
        }

        /* Enhanced Navigation Styles */
        .nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--primary-color);
            height: var(--nav-height);
            z-index: 1000;
            transition: transform var(--transition-speed) ease;
        }

        .nav.hidden {
            transform: translateY(-100%);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .nav-logo {
            color: white;
            font-size: 1.25rem;
            font-weight: bold;
            text-decoration: none;
            z-index: 1001;
        }

        /* Improved Hamburger Menu */
        .hamburger {
            display: none;
            background: none;
            border: none;
            padding: 0.5rem;
            cursor: pointer;
            position: relative;
            z-index: 1001;
            width: 30px;
            height: 30px;
        }

        .hamburger-lines {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .hamburger-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background-color: white;
            transition: all var(--transition-speed) ease-in-out;
        }

        .line1 { top: 20%; }
        .line2 { top: 50%; transform: translateY(-50%); }
        .line3 { bottom: 20%; }

        .hamburger.active .line1 {
            transform: translateY(8px) rotate(45deg);
        }

        .hamburger.active .line2 {
            opacity: 0;
        }

        .hamburger.active .line3 {
            transform: translateY(-8px) rotate(-45deg);
        }

        .nav-menu {
            display: flex;
            gap: 2rem;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .nav-menu a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem;
            transition: all var(--transition-speed) ease;
        }

        .nav-menu a:hover {
            color: var(--accent-color);
        }

        /* Enhanced Mobile Menu */
        @media (max-width: 768px) {
            .hamburger {
                display: block;
            }

            .nav-menu {
                position: fixed;
                top: 0;
                right: -100%;
                width: 100%;
                max-width: 300px;
                height: 100vh;
                background: var(--primary-color);
                flex-direction: column;
                align-items: center;
                justify-content: center;
                gap: 2rem;
                padding: 2rem;
                transition: right var(--transition-speed) ease;
                box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
            }

            .nav-menu.active {
                right: 0;
            }

            .nav-menu li {
                opacity: 0;
                transform: translateX(50px);
                transition: all var(--transition-speed) ease;
            }

            .nav-menu.active li {
                opacity: 1;
                transform: translateX(0);
            }

            /* Staggered animation for menu items */
            .nav-menu li:nth-child(1) { transition-delay: 0.1s; }
            .nav-menu li:nth-child(2) { transition-delay: 0.2s; }
            .nav-menu li:nth-child(3) { transition-delay: 0.3s; }
            .nav-menu li:nth-child(4) { transition-delay: 0.4s; }
            .nav-menu li:nth-child(5) { transition-delay: 0.5s; }
            .nav-menu li:nth-child(6) { transition-delay: 0.6s; }
            .nav-menu li:nth-child(7) { transition-delay: 0.7s; }

            .nav-overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                opacity: 0;
                visibility: hidden;
                transition: all var(--transition-speed) ease;
                z-index: 999;
            }

            .nav-overlay.active {
                opacity: 1;
                visibility: visible;
            }

            body.menu-open {
                overflow: hidden;
            }
        }

        /* Rest of your existing styles remain unchanged */
        .controls {
            margin-top: 80px;
            padding: 2rem;
            text-align: center;
        }

        .search-box {
            padding: 0.5rem 1rem;
            width: 300px;
            margin-bottom: 1rem;
            border: 2px solid var(--primary-color);
            border-radius: 4px;
        }

        .filter-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 2rem;
        }

        .filter-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            background-color: var(--secondary-color);
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .filter-btn.active {
            background-color: var(--accent-color);
        }

        /* Existing stories grid styles */
        .stories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .story-entry {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .story-entry:hover {
            transform: translateY(-5px);
        }

        .story-info {
            padding: 1.5rem;
        }

        .story-info h2 {
            margin: 0 0 1rem;
            color: var(--primary-color);
        }

        .tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }

        .tag {
            background-color: var(--accent-color);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.875rem;
        }

        .sdg-number {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        /* Enhanced Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .close-modal {
            position: absolute;
            right: 1rem;
            top: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-color);
        }

        .modal-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
        }

        /* Mobile Responsive Adjustments */
        @media (max-width: 768px) {
            .search-box {
                width: 100%;
                max-width: 300px;
            }

            .filter-buttons {
                flex-direction: column;
                align-items: center;
            }

            .filter-btn {
                width: 100%;
                max-width: 300px;
            }

            .stories-grid {
                padding: 1rem;
            }

            .modal-content {
                width: 95%;
                padding: 1.5rem;
            }
        }

        /* Touch-friendly improvements */
        @media (hover: none) {
            .story-entry {
                transform: none !important;
            }

            .nav-menu a {
                padding: 1rem;
            }

            .filter-btn {
                padding: 0.75rem 1.5rem;
            }
        }
    </style>
</head>
<body>
    <nav class="nav">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">SDG Stories</a>
            <button class="hamburger" aria-label="Toggle navigation">
                <div class="hamburger-lines">
                    <span class="hamburger-line line1"></span>
                    <span class="hamburger-line line2"></span>
                    <span class="hamburger-line line3"></span>
                </div>
            </button>
            <ul class="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About SDGs</a></li>
                <li><a href="comics.html">Stories</a></li>
                <li><a href="characters.html">Characters</a></li>
                <li><a href="impact.html">Impact</a></li>
                <li><a href="contribute.html">Contribute</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </div>
    </nav>
    <div class="nav-overlay"></div>

    <div class="controls">
        <input type="text" class="search-box" placeholder="Search stories...">
        <div class="filter-buttons">
            <button class="filter-btn active" data-filter="all">All SDGs</button>
            <button class="filter-btn" data-filter="poverty">No Poverty</button>
            <button class="filter-btn" data-filter="hunger">Zero Hunger</button>
            <button class="filter-btn" data-filter="health">Good Health</button>
            <button class="filter-btn" data-filter="education">Quality Education</button>
            <button class="filter-btn" data-filter="gender">Gender Equality</button>
            <button class="filter-btn" data-filter="environment">Environmental</button>
        </div>
    </div>

    <div class="content">
        <div class="stories-grid">
            <div class="story-entry" data-aos="fade-up" data-tags="innovation,climate,community">
                <div class="story-info">
                    <div class="sdg-number">SDG 6 & 11</div>
                    <h2>The Rainwater Harvesters</h2>
                    <p>
                        In the drought-stricken village of Karamoja, the sun blazed relentlessly, leaving the land cracked and dry. The community, desperate for clean water, watched helplessly as the rains became more sporadic. But hope came in the form of young Musa, a student with a vision. Musa, noticing the despair in his village, called upon his classmates to join him in solving the crisis.
                    </p>
                    <p>
                        Armed with nothing but their determination and scraps of recycled materials, Musa and his team set to work. They scavenged old tarpaulins, broken pipes, and discarded metal drums from the village. Together, they sketched out a simple yet ingenious design for a rainwater harvesting system: tarpaulins to funnel water, pipes to guide it, and drums to store it. Every step of the process was met with doubt from the villagers, but Musa remained steadfast.
                    </p>
                    <p>
                        Weeks later, dark clouds finally gathered over Karamoja, signaling the arrival of long-awaited rain. As the first drops fell, the system roared to life. Rainwater rushed down the tarpaulin funnels, coursing through the pipes, and filled the drums to the brim. The villagers, once skeptical, erupted into cheers. For the first time in years, they had a sustainable source of clean water.
                    </p>
                    <p>
                        Musa and his classmates didn’t stop there. They taught the villagers how to build similar systems, ensuring every household could benefit. Within months, their innovation transformed Karamoja. The water, once a distant dream, now quenched the thirst of 300 households, bringing life back to the parched village.
                    </p>
                    <p>
                        This is not just a story of water. It’s a story of resilience, teamwork, and the unyielding power of youth to change the world. In Karamoja, the rain no longer brought despair—it brought hope, all thanks to Musa and his rainwater harvesters.
                    </p>
                    <div class="tags">
                        <span class="tag">Innovation</span>
                        <span class="tag">Climate Action</span>
                        <span class="tag">Community</span>
                    </div>
                </div>
            </div>
            

            <div class="story-entry" data-aos="fade-up" data-tags="hunger,innovation">
                <div class="story-info">
                    <div class="sdg-number">SDG 2</div>
                    <h2>The Vertical Gardens of Kampala</h2>
                    <p>Follow Joshua Mukisa's journey of transforming urban food production in Kampala's informal settlements through innovative vertical gardening techniques, now feeding over 200 families.</p>
                    <div class="tags">
                        <span class="tag">Zero Hunger</span>
                        <span class="tag">Urban Agriculture</span>
                    </div>
                </div>
            </div>

            <div class="story-entry" data-aos="fade-up" data-tags="health,poverty">
                <div class="story-info">
                    <div class="sdg-number">SDG 1 & 3</div>
                    <h2>Mobile Clinic Revolution</h2>
                    <p>Dr. Agnes Atim's mobile clinic initiative in Northern Uganda brings healthcare to remote villages, serving over 1,000 patients monthly and creating employment for local youth as health workers.</p>
                    <div class="tags">
                        <span class="tag">Healthcare</span>
                        <span class="tag">Poverty Reduction</span>
                    </div>
                </div>
            </div>

            <div class="story-entry" data-aos="fade-up" data-tags="environment,innovation">
                <div class="story-info">
                    <div class="sdg-number">SDG 13 & 15</div>
                    <h2>Forest Guardians of Bwindi</h2>
                    <p>The inspiring story of former poachers turned conservation leaders who now protect Bwindi's mountain gorillas while developing eco-tourism opportunities for their community.</p>
                    <div class="tags">
                        <span class="tag">Climate Action</span>
                        <span class="tag">Conservation</span>
                    </div>
                </div>
            </div>

            <div class="story-entry" data-aos="fade-up" data-tags="gender,poverty">
                <div class="story-info">
                    <div class="sdg-number">SDG 5 & 8</div>
                    <h2>Craft Queens Collective</h2>
                    <p>How a group of women in Gulu transformed traditional craft-making into a successful fair-trade enterprise, now employing over 50 women and exporting globally.</p>
                    <div class="tags">
                        <span class="tag">Women Empowerment</span>
                        <span class="tag">Economic Growth</span>
                    </div>
                </div>
            </div>

            <div class="story-entry" data-aos="fade-up" data-tags="education,innovation">
                <div class="story-info">
                    <div class="sdg-number">SDG 4 & 9</div>
                    <h2>Solar Powered Learning</h2>
                    <p>The remarkable journey of a rural school in Tororo that implemented solar-powered tablets and interactive learning, improving student performance by 60% in just one year.</p>
                    <div class="tags">
                        <span class="tag">Education</span>
                        <span class="tag">Technology</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal structure -->
    <div class="modal">
        <div class="modal-content">
            <button class="close-modal">&times;</button>
            <h2></h2>
            <p></p>
            <div class="tags"></div>
            <div class="modal-nav">
                <button class="prev-comic">Previous Story</button>
                <button class="next-comic">Next Story</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize AOS
        AOS.init({
            duration: 800,
            once: true
        });

        // Enhanced navigation functionality
        document.addEventListener('DOMContentLoaded', function() {
            const hamburger = document.querySelector('.hamburger');
            const navMenu = document.querySelector('.nav-menu');
            const nav = document.querySelector('.nav');
            const overlay = document.querySelector('.nav-overlay');
            
            // Improved hamburger menu toggle
            function toggleMenu() {
                hamburger.classList.toggle('active');
                navMenu.classList.toggle('active');
                overlay.classList.toggle('active');
                document.body.classList.toggle('menu-open');
            }

            hamburger.addEventListener('click', toggleMenu);
            overlay.addEventListener('click', toggleMenu);

            // Close menu when clicking a link
            const navLinks = document.querySelectorAll('.nav-menu a');
            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    if (navMenu.classList.contains('active')) {
                        toggleMenu();
                    }
                });
            });

            // Enhanced scroll behavior
            let lastScroll = 0;
            const scrollThreshold = 5;
// Enhanced scroll behavior continued...
let scrollTimer = null;
            
            window.addEventListener('scroll', () => {
                const currentScroll = window.pageYOffset;
                
                if (currentScroll <= 0) {
                    nav.classList.remove('hidden');
                    return;
                }

                // Clear the existing timer
                if (scrollTimer !== null) {
                    clearTimeout(scrollTimer);
                }

                // Set a timeout to hide/show the nav after scrolling stops
                scrollTimer = setTimeout(() => {
                    if (Math.abs(currentScroll - lastScroll) > scrollThreshold) {
                        if (currentScroll > lastScroll) {
                            nav.classList.add('hidden');
                        } else {
                            nav.classList.remove('hidden');
                        }
                    }
                    lastScroll = currentScroll;
                }, 50);
            });

            // Handle window resize
            let resizeTimer;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(() => {
                    if (window.innerWidth > 768) {
                        hamburger.classList.remove('active');
                        navMenu.classList.remove('active');
                        overlay.classList.remove('active');
                        document.body.classList.remove('menu-open');
                    }
                }, 250);
            });

            // Prevent scroll when menu is open on mobile
            function preventScroll(e) {
                if (document.body.classList.contains('menu-open')) {
                    e.preventDefault();
                }
            }

            // Add touch event listeners for mobile
            document.addEventListener('touchmove', preventScroll, { passive: false });
        });

        // Enhanced search and filter functionality
        const storiesGrid = document.querySelector('.stories-grid');
        const searchBox = document.querySelector('.search-box');
        const filterButtons = document.querySelectorAll('.filter-btn');
        const modal = document.querySelector('.modal');
        const modalContent = modal.querySelector('.modal-content');
        const closeModal = modal.querySelector('.close-modal');
        const prevButton = modal.querySelector('.prev-comic');
        const nextButton = modal.querySelector('.next-comic');

        let currentStoryIndex = 0;
        let visibleStories = [];
        let searchDebounceTimer;

        // Debounced search functionality
        searchBox.addEventListener('input', (e) => {
            clearTimeout(searchDebounceTimer);
            searchDebounceTimer = setTimeout(() => {
                filterStories();
            }, 300);
        });

        // Enhanced filter functionality
        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                filterButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                filterStories();
            });
        });

        function filterStories() {
            const searchTerm = searchBox.value.toLowerCase().trim();
            const activeFilter = document.querySelector('.filter-btn.active').dataset.filter;
            
            const stories = Array.from(document.querySelectorAll('.story-entry'));
            visibleStories = [];

            stories.forEach(story => {
                const title = story.querySelector('h2').textContent.toLowerCase();
                const description = story.querySelector('p').textContent.toLowerCase();
                const tags = story.dataset.tags || '';

                const matchesSearch = !searchTerm || 
                    title.includes(searchTerm) || 
                    description.includes(searchTerm);
                const matchesFilter = activeFilter === 'all' || tags.includes(activeFilter);

                if (matchesSearch && matchesFilter) {
                    story.style.display = 'block';
                    visibleStories.push(story);
                } else {
                    story.style.display = 'none';
                }
            });

            // Refresh AOS animations
            AOS.refresh();
        }

        // Enhanced modal functionality
        function showModal(story) {
            const title = story.querySelector('h2').textContent;
            const description = story.querySelector('p').textContent;
            const tags = story.querySelector('.tags').innerHTML;

            modalContent.querySelector('h2').textContent = title;
            modalContent.querySelector('p').textContent = description;
            modalContent.querySelector('.tags').innerHTML = tags;

            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';

            updateNavigationButtons();
            
            // Add animation class
            modalContent.classList.add('modal-animate');
        }

        function updateNavigationButtons() {
            prevButton.disabled = currentStoryIndex <= 0;
            nextButton.disabled = currentStoryIndex >= visibleStories.length - 1;
            
            prevButton.style.visibility = currentStoryIndex > 0 ? 'visible' : 'hidden';
            nextButton.style.visibility = currentStoryIndex < visibleStories.length - 1 ? 'visible' : 'hidden';
        }

        // Modal event listeners
        storiesGrid.addEventListener('click', (e) => {
            const story = e.target.closest('.story-entry');
            if (story) {
                currentStoryIndex = visibleStories.indexOf(story);
                showModal(story);
            }
        });

        closeModal.addEventListener('click', closeModalFunction);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModalFunction();
            }
        });

        function closeModalFunction() {
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            modalContent.classList.remove('modal-animate');
        }

        prevButton.addEventListener('click', () => {
            if (currentStoryIndex > 0) {
                currentStoryIndex--;
                showModal(visibleStories[currentStoryIndex]);
            }
        });

        nextButton.addEventListener('click', () => {
            if (currentStoryIndex < visibleStories.length - 1) {
                currentStoryIndex++;
                showModal(visibleStories[currentStoryIndex]);
            }
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (modal.style.display === 'flex') {
                switch(e.key) {
                    case 'Escape':
                        closeModalFunction();
                        break;
                    case 'ArrowLeft':
                        if (currentStoryIndex > 0) {
                            currentStoryIndex--;
                            showModal(visibleStories[currentStoryIndex]);
                        }
                        break;
                    case 'ArrowRight':
                        if (currentStoryIndex < visibleStories.length - 1) {
                            currentStoryIndex++;
                            showModal(visibleStories[currentStoryIndex]);
                        }
                        break;
                }
            }
        });

        // Touch swipe support for modal
        let touchStartX = 0;
        let touchEndX = 0;

        modalContent.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        }, { passive: true });

        modalContent.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        }, { passive: true });

        function handleSwipe() {
            const swipeThreshold = 50;
            const swipeDistance = touchEndX - touchStartX;

            if (Math.abs(swipeDistance) > swipeThreshold) {
                if (swipeDistance > 0 && currentStoryIndex > 0) {
                    // Swipe right - show previous
                    currentStoryIndex--;
                    showModal(visibleStories[currentStoryIndex]);
                } else if (swipeDistance < 0 && currentStoryIndex < visibleStories.length - 1) {
                    // Swipe left - show next
                    currentStoryIndex++;
                    showModal(visibleStories[currentStoryIndex]);
                }
            }
        }

        // Error handling
        window.addEventListener('error', (e) => {
            console.error('An error occurred:', e.error);
            // You could add user-friendly error messaging here
            const errorMessage = document.createElement('div');
            errorMessage.className = 'error-message';
            errorMessage.textContent = 'Something went wrong. Please try refreshing the page.';
            document.body.appendChild(errorMessage);
            
            setTimeout(() => {
                errorMessage.remove();
            }, 5000);
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            filterStories();
            AOS.refresh();
        });

        // Handle lazy loading of images if needed
        if ('loading' in HTMLImageElement.prototype) {
            const images = document.querySelectorAll('img[loading="lazy"]');
            images.forEach(img => {
                img.src = img.dataset.src;
            });
        } else {
            // Fallback for browsers that don't support lazy loading
            const script = document.createElement('script');
            script.src = 'https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js';
            document.body.appendChild(script);
        }
    </script>
</body>
</html>
